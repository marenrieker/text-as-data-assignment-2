install.packages("manifestoR")
library(manifestoR)
library(tidyverse)
knitr::opts_chunk$set(echo = F)
library(manifestoR)
library(tidyverse)
knitr::opts_chunk$set(echo = F)
library(manifestoR)
mp_setapikey("manifesto_apikey.txt")
library(tidyverse)
library(tm)
?mp_corpus
mp <- mp_corpus(party == c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 01/1990) #afd
df <- data.frame(party == c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 01/1990) #afd
View(mp)
mp[["41521_199410"]][["content"]][["text"]]
mp <- mp_corpus(party == c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 199001) #afd
View(mp)
mp[["41320_199410"]][["content"]][["text"]]
mpds <- mp_maindataset()
mp_coreversions()
#mp <- mp_corpus(party == c(41112, 41113, #greens
#                           41221, 41222, 41223, #left
#                           41320, #spd
#                           41420, #fdp
#                           41521, #union
#                           41953) & date >= 199001) #afd
mpds <- mp_maindataset(version = "MPDS2022a")
wanted <- data.frame(
party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953), #afd
date >= 199000)
wanted <- data.frame(
party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953), #afd
date > 199000)
wanted <- data.frame(
party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & #afd
date > 199000)
mp <- mp_corpus(party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 199001) #afd
mp <- mp_corpus(party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date > 199001) #afd
mp <- mp_corpus(party = c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 199001) #afd
mp <- mp_corpus(party == c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953) & date >= 199001) #afd
View(mp)
View(mpds)
mpds_de <- mpds %>%
filter(countryname == "Germany" & party == c(41112, 41113, #greens
41221, 41222, 41223, #left
41320, #spd
41420, #fdp
41521, #union
41953))
View(mpds_de)
View(mpds_de)
mp_corpus(mpds_de)
View(mpds)
mpds_de <- mpds %>%
filter(countryname == "Germany" & date >= 199001)
View(mpds_de)
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001)
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party == c(41112, 41113, 41221, 41222, 41223, 41320, 41420, 41521, 41953))
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001)
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party != "41952")
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party != "41952"|"41912") #taking the pirates out of the dataset
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party != "41952" #taking the pirates out of the dataset
& party != "41912") #same for the ssw
mp_corpus(mpds_de)
mpc <- mp_corpus(mpds_de)
filter(mpc, party == "41912")
filter(mpds_de, party == "41912")
filter(mpds_de, party == c(41112, 41113))
View(mpds_de)
filter(mpds_de, party == c("41112", "41113"))
filter(mpds_de, party == 41420)
filter(mpds_de, party == c(41221, 41222, 41223))
filter(mpds_de, party == 41221, 41222, 41223)
filter(mpds_de, party == 41221 | 41222 | 41223)
filter(mpds_de, party == 41953)
filter(mpds_de, party == 41320)
View(mpc)
library(quanteda)
dfmat <- mpc %>%
tokens() %>%
dfm()
is.corpus(mpc)
typeof(mpc)
typeof(mpds)
mpds <- data.frame(mp_maindataset(version = "MPDS2022a"))
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party != "41952" #taking the pirates out of the dataset
& party != "41912") #same for the ssw
mpc <- mp_corpus(mpds_de)
is.corpus(mpc)
typeof(mpc)
typeof(mpds_de)
as.data.frame(mpds_de)
mpc <- mp_corpus(mpds_de)
is.corpus(mpc)
as.corpus(mpc)
corpus(mpc)
is.corpus(mpc)
dfmat <- mpc %>%
tokens() %>%
dfm()
mpds <- data.frame(mp_maindataset(version = "MPDS2022a"))
mpds_de <- mpds %>%
filter(countryname == "Germany"
& date >= 199001
& party != "41952" #taking the pirates out of the dataset
& party != "41912") #same for the ssw
as.data.frame(mpds_de)
mpc <- mp_corpus(mpds_de)
dfmat <- mpc %>%
tokens() %>%
dfm()
mpc <- corpus(mpc)
dfmat <- mpc %>%
tokens() %>%
dfm()
dfmat
?corpus_reshape
dfmat <- mpc %>%
tokens() %>%
tokens_remove(pattern=stopwords("de")) %>%
dfm()
?tokens_remove
dfmat
dfmat <- mpc %>%
tokens() %>%
tokens_remove(pattern = stopwords("de"), remove_punct = T) %>%
dfm()
dfmat <- mpc %>%
tokens() %>%
tokens_remove(tokens(mpc, remove_punct = TRUE), pattern = stopwords("de")) %>%
dfm()
dfmat <- mpc %>%
tokens() %>%
tokens_remove(pattern = stopwords("de")) %>%
dfm()
dfmat
dfmat <- mpc %>%
tokens() %>%
tokens_remove(pattern = stopwords("de"), tokens(mpc, remove_punct = TRUE)) %>%
dfm()
dfmat <- mpc %>%
tokens() %>%
tokens_remove(tokens(mpc, remove_punct = TRUE)) %>%
dfm()
typeof(mpc)
mpc <- corpus(mpc)
typeof(mpc)
dfmat <- mpc %>%
tokens() %>%
tokens_remove(pattern = stopwords("de")) %>%
removePunctuation() %>%
dfm()
dfmat <- mpc %>%
removePunctuation() %>%
tokens() %>%
tokens_remove(pattern = stopwords("de")) %>%
dfm()
dfmat
knitr::opts_chunk$set(echo = F)
library(manifestoR)
mp_setapikey("manifesto_apikey.txt")
library(tm)
library(tidyverse)
library(quanteda)
mpds <- data.frame(mp_maindataset(version = "MPDS2022a"))
install.packages("topicmodels")
library(topicmodels)
try_lda <- LDA(dfmat, k = 7)
try_lda
?tidyverse
library(tidytext)
mani_topics <- tidy(try_lda, matrix = "beta")
mani_topics
dfmat <- mpc %>%
#  removePunctuation() %>%
tokens(remove_numbers = T, remove_punct = T) %>%
tokens_remove(pattern = stopwords("de")) %>%
dfm()
dfmat
try_lda <- LDA(dfmat, k = 7)
try_lda
mani_topics <- tidy(try_lda, matrix = "beta")
mani_topics
mp_top_terms <- mani_topics %>%
group_by(topic) %>%
slice_max(beta, n = 10) %>%
ungroup() %>%
arrange(topic, -beta)
mp_top_terms %>%
ggplot(aes(beta, term, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
scale_y_reordered()
beta_wide <- mani_topics %>%
mutate(topic = paste0("topic", topic)) %>%
pivot_wider(names_from = topic, values_from = beta) %>%
filter(topic1 > .001 | topic2 > .001) %>%
mutate(log_ratio = log2(topic2 / topic1))
plot(beta_wide)
beta_wide %>%
ggplot() + geom_bar() + coord_flip()
beta_wide %>%
ggplot() + geom_bar(aes(x = log_ratio, y = topic)) + coord_flip()
beta_wide <- mani_topics %>%
mutate(topic = paste0("topic", topic)) %>%
pivot_wider(names_from = topic, values_from = beta) %>%
filter(topic1 > .001 | topic2 > .001) %>%
mutate(log_ratio = log2(topic2 / topic1))
View(mani_topics)
beta_wide %>%
ggplot() + geom_bar(aes(x = log_ratio, y = mani_topics$topic)) + coord_flip()
